# Prefix
set-option -g prefix C-t
bind-key t send-prefix
unbind-key C-b

# General
set-option -g default-terminal "screen-256color"
set-option -ga terminal-overrides ",xterm-256color:Tc"
set-window-option -g xterm-keys on
set-option -s escape-time 0  # For vim, neovim. Default is 500ms.
set-option -s focus-events on
set-option -g history-limit 10000
set-option -g default-shell "${SHELL}"
set-option -g default-command "${SHELL}"

# Window/Pane
set-option -g base-index 1
set-option -g pane-base-index 1
set-window-option -g automatic-rename on
set-option -g renumber-windows on
set-option -g set-titles on
set-option -g set-titles-string "#S:#{pane_current_command}"
set-option -g window-size latest
set-window-option -g aggressive-resize on

## Status bar
set-option -g @status-right-separator " "
set-option -g @status-left-separator "î‚¶"
set-option -g status on
set-option -g status-interval 1
set-option -g status-right-length 64
set-option -g status-right "\
#[fg=#93a1a1]#{@status-left-separator}#{cpu_bg_color}#{cpu_fg_color}#{cpu_icon} CPU: #{cpu_percentage}#{@status-right-separator}\
#[fg=#839496]#{@status-left-separator}#{ram_bg_color}#{ram_fg_color}#{ram_icon} RAM: #{ram_percentage}#{@status-right-separator}\
#[fg=#657b83]#{@status-left-separator}#{battery_color_bg}#{battery_color_fg}#{battery_icon} #{battery_percentage}#{@status-right-separator}\
#[fg=#586e75]#{@status-left-separator}#[bg=#586e75]#[fg=black]ðŸ“… %Y-%m-%dT%H:%M:%S#{@status-right-separator}"
set-option -g monitor-activity on
set-option -g visual-activity on
set-option -g status-position top

## Keybind
set-window-option -g status-keys vi
set-window-option -g mode-keys vi
bind-key c new-window -c '#{pane_current_path}'
bind-key n split-window -c '#{pane_current_path}'
bind-key v split-window -h -c '#{pane_current_path}'
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-pipe-and-cancel pbcopy
unbind-key -T copy-mode-vi Enter
bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel pbcopy
bind-key -T copy-mode-vi Escape send -X clear-selection
bind-key -T copy-mode-vi C-Up send -X page-up
bind-key -T copy-mode-vi C-Down send -X page-down
bind-key -T copy-mode-vi C-a send -X start-of-line
bind-key -T copy-mode-vi C-e send -X end-of-line
bind-key -T copy-mode-vi C-k send -X copy-end-of-line
bind-key -T copy-mode-vi C-v send -X rectangle-toggle

## Mouse
set-option -g mouse off
bind-key m \
    set-option -g mouse on \; \
    display "Mouse: ON"
bind-key M \
    set-option -g mouse off \; \
    display "Mouse: OFF"

## Theme
set-option -g @colors-solarized 'dark'
set-option -g @plugin 'seebi/tmux-colors-solarized'

## Plugins
set-option -g @plugin 'tmux-plugins/tmux-battery'
set-option -g @plugin 'tmux-plugins/tmux-cpu'
set-option -g @plugin 'tmux-plugins/tmux-pain-control'
set-option -g @plugin 'tmux-plugins/tmux-sessionist'
set-option -g @plugin 'tmux-plugins/tmux-sensible'
set-option -g @plugin 'tmux-plugins/tmux-yank'

### Battery
set-option -g @batt_remain_short 'true'
set-option -g @batt_icon_charge_tier8 'ðŸŒ•'
set-option -g @batt_icon_charge_tier7 'ðŸŒ–'
set-option -g @batt_icon_charge_tier6 'ðŸŒ–'
set-option -g @batt_icon_charge_tier5 'ðŸŒ—'
set-option -g @batt_icon_charge_tier4 'ðŸŒ—'
set-option -g @batt_icon_charge_tier3 'ðŸŒ˜'
set-option -g @batt_icon_charge_tier2 'ðŸŒ˜'
set-option -g @batt_icon_charge_tier1 'ðŸŒ‘'
set-option -g @batt_icon_status_charged 'ðŸ”‹'
set-option -g @batt_icon_status_charging 'âš¡'
set-option -g @batt_icon_status_discharging 'ðŸ‘Ž'
set-option -g @batt_color_charge_primary_tier8 '#00ff00'
set-option -g @batt_color_charge_primary_tier7 '#55ff00'
set-option -g @batt_color_charge_primary_tier6 '#aaff00'
set-option -g @batt_color_charge_primary_tier5 '#ffff00'
set-option -g @batt_color_charge_primary_tier4 '#ffc000'
set-option -g @batt_color_charge_primary_tier3 '#ff8000'
set-option -g @batt_color_charge_primary_tier2 '#ff4000'
set-option -g @batt_color_charge_primary_tier1 '#ff0000'
set-option -g @batt_color_charge_secondary_tier8 '#657b83'
set-option -g @batt_color_charge_secondary_tier7 '#657b83'
set-option -g @batt_color_charge_secondary_tier6 '#657b83'
set-option -g @batt_color_charge_secondary_tier5 '#657b83'
set-option -g @batt_color_charge_secondary_tier4 '#657b83'
set-option -g @batt_color_charge_secondary_tier3 '#657b83'
set-option -g @batt_color_charge_secondary_tier2 '#657b83'
set-option -g @batt_color_charge_secondary_tier1 '#657b83'
set-option -g @batt_color_status_primary_charged green
set-option -g @batt_color_status_primary_charging green
set-option -g @batt_color_status_primary_discharging '#cb4b16'
set-option -g @batt_color_status_primary_attached '#cb4b16'
set-option -g @batt_color_status_primary_unknown 'red'
set-option -g @batt_color_status_secondary_charged '#657b83'
set-option -g @batt_color_status_secondary_charging '#657b83'
set-option -g @batt_color_status_secondary_discharging '#657b83'
set-option -g @batt_color_status_secondary_attached '#657b83'
set-option -g @batt_color_status_secondary_unknown '#657b83'

### CPU
set-option -g @cpu_low_fg_color "#[fg=blue]"
set-option -g @cpu_medium_fg_color "#[fg=#cb4b16]"
set-option -g @cpu_high_fg_color "#[fg=red]"
set-option -g @cpu_low_bg_color "#[bg=#93a1a1]"
set-option -g @cpu_medium_bg_color "#[bg=#93a1a1]"
set-option -g @cpu_high_bg_color "#[bg=#93a1a1]"
run ~/.config/tmux/plugins/tpm/tpm

### RAM
set-option -g @ram_low_fg_color "#[fg=blue]"
set-option -g @ram_medium_fg_color "#[fg=#cb4b16]"
set-option -g @ram_high_fg_color "#[fg=red]"
set-option -g @ram_low_bg_color "#[bg=#839496]"
set-option -g @ram_medium_bg_color "#[bg=#839496]"
set-option -g @ram_high_bg_color "#[bg=#839496]"

new-session
if-shell "test -e ~/.tmux.local.conf" "source-file ~/.tmux.local.conf" ""
